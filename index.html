<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mashoma - Venta de Hongos</title>
    <meta name="Description" content="Venta de hongos y hortalizas frescas.">
    <meta name="author" content="Lupita">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <link rel="stylesheet" href="styles.css">

    <style>
        /* ================= ESTILOS DEL CARRITO TIPO APP ================= */
        .carrito-item {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }
        .carrito-img {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
            margin-right: 15px;
            border: 1px solid #ddd;
        }
        .carrito-detalles {
            flex-grow: 1;
        }
        .carrito-titulo {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .carrito-controles {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .btn-cantidad {
            width: 28px;
            height: 28px;
            border: 1px solid #ccc;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
            border-radius: 4px;
            transition: background 0.2s;
        }
        .btn-cantidad:hover {
            background: #f0f0f0;
        }
        .btn-quitar {
            font-size: 11px;
            color: #dc3545;
            background: none;
            border: 1px solid #dc3545;
            border-radius: 4px;
            padding: 2px 6px;
            cursor: pointer;
            margin-left: 10px;
        }
        .btn-quitar:hover {
            background: #dc3545;
            color: white;
        }
        .carrito-precio-info {
            text-align: right;
            font-size: 13px;
            min-width: 70px;
        }
        .carrito-footer {
            border-top: 1px solid #ddd;
            padding-top: 20px;
            background-color: #f8f9fa;
        }
        .btn-whatsapp-carrito {
            background-color: #25D366;
            color: white;
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            transition: background 0.3s;
        }
        .btn-whatsapp-carrito:hover {
            background-color: #1ebc57;
            color: white;
        }
        
        /* Bot칩n flotante del carrito */
        .btn-flotante-carrito {
            position: fixed;
            bottom: 90px; /* Un poco arriba del de WhatsApp original */
            right: 20px;
            z-index: 1050;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #2f6b2f; /* Verde oscuro */
            color: white;
            border: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
        }
        
        .whatsapp-float {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #25d366;
            color: #fff;
            border-radius: 50px;
            text-align: center;
            font-size: 30px;
            box-shadow: 2px 2px 3px #999;
            z-index: 100;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
        }
    </style>
</head>
<body>

    <div id="banner" class="p-3 text-white text-center bg-danger">
      Banner de promoci칩n: 춰Registrate ahora y obt칠n un 20% de descuento en todos nuestros productos!
    </div>

    <nav class="navbar navbar-expand-lg bg-body-tertiary sticky-top" aria-label="Navegaci칩n principal">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="#">
           <img src="img/Mas.png" height="30" class="align-text-top me-2" alt="Logo">
           <span class="fw-semibold">Hongos Mashoma</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainNavbar">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link active" href="#">Inicio</a></li>
            <li class="nav-item"><a class="nav-link" href="#Productos">Productos</a></li>
            <li class="nav-item"><a class="nav-link" href="#Contacto">Contacto</a></li>
            <li class="nav-item"><a class="nav-link fw-bold text-success" href="#" onclick="abrirCarrito()"> Ver Carrito <i class="fas fa-shopping-cart"></i></a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div id="mainCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="0" class="active"></button> 
            <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="2"></button>
        </div>
        <div class="carousel-inner rounded-3 shadow-sm">
            <div class="carousel-item active">
                <img src="img/blanca.png" class="d-block w-100" alt="Hongo Seta blanco" style="height: 380px; object-fit: cover;">
                <div class="carousel-caption d-none d-md-block">
                    <h5>Hongo seta blanco</h5>
                    <p>Conoce m치s acerca de este producto.</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="img/Gemini_Generated_Image_hnvz6vhnvz6vhnvz.png" class="d-block w-100" alt="Hongo Seta Gris" style="height: 380px; object-fit: cover;">
                <div class="carousel-caption d-none d-md-block">
                    <h5>Hongo seta gris</h5>
                </div>
            </div>
            <div class="carousel-item">
                <img src="img/Gemini_Generated_Image_jq7ztpjq7ztpjq7z.png" class="d-block w-100" alt="Champi침ones" style="height: 380px; object-fit: cover;">
                <div class="carousel-caption d-none d-md-block">
                    <h5>Champi침ones</h5>
                </div>
            </div>
        </div>  
    </div>  

    <section class="container my-5">
        <h1 class="text-center mb-4">Bienvenidos a Hongos Mashoma</h1>
        <p class="text-center lead">Ofrecemos hongos comestibles frescos y de alta calidad.</p>
        
        <div class="alert alert-info mt-4" role="alert">
            춰Atento a nuestras novedades! Muy pronto nuevos hongos gourmet.
        </div>
    </section>
    
    <section class="container my-5" id="Productos">
      <h2 class="mb-4 text-center">Nuestros Productos</h2>
      <div class="row g-4">
        
        <div class="col-md-4">
          <div class="card h-100 shadow-sm">
            <img src="img/blanca.png" class="card-img-top" alt="Hongo Seta Blanco" style="height: 220px; object-fit: cover;">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">Hongo Seta Blanco</h5>
              <p class="card-text">Setas frescas de alta calidad, directo del cultivo.</p>
              <h4 class="text-success mt-auto mb-3">$50.00 MXN</h4>
              <button class="btn btn-primary w-100" onclick="agregarAlCarrito(1, 'Hongo Seta Blanco', 50, 'img/blanca.png')">
                <i class="fas fa-cart-plus"></i> Agregar al carrito
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card h-100 shadow-sm">
            <img src="img/Captura de pantalla 2025-11-13 081752.png" class="card-img-top" alt="Hongos Seta Gris" style="height: 220px; object-fit: cover;">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">Hongos Seta Gris</h5>
              <p class="card-text">Frescos y de sabor suave, ideales para salteados.</p>
              <h4 class="text-success mt-auto mb-3">$55.00 MXN</h4>
              <button class="btn btn-primary w-100" onclick="agregarAlCarrito(2, 'Hongo Seta Gris', 55, 'img/Captura de pantalla 2025-11-13 081752.png')">
                <i class="fas fa-cart-plus"></i> Agregar al carrito
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card h-100 shadow-sm">
            <div class="card-header bg-warning">Nuevo producto</div>
            <img src="img/Gemini_Generated_Image_jq7ztpjq7ztpjq7z.png" class="card-img-top" alt="Champi침ones" style="height: 185px; object-fit: cover;">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">Champi침ones</h5>
              <p class="card-text">Vers치tiles y deliciosos para cualquier platillo.</p>
              <h4 class="text-success mt-auto mb-3">$85.00 MXN</h4>
              <button class="btn btn-success w-100" onclick="agregarAlCarrito(3, 'Champi침ones', 85, 'img/Gemini_Generated_Image_jq7ztpjq7ztpjq7z.png')">
                <i class="fas fa-cart-plus"></i> Agregar al carrito
              </button>
            </div>
          </div>
        </div>

      </div>
    </section>

    <section class="container my-5" id="Contacto">
        <h2 class="mb-4">Cont치ctanos</h2>
        <div class="card border-secondary" style="max-width: 25rem; background-color: #f8f9fa;">
            <div class="card-header bg-secondary text-white">Informaci칩n</div>
            <div class="card-body text-dark">
                <h5 class="card-title">쯊ienes dudas?</h5>
                <ul class="list-unstyled mb-3">
                    <li>游 55-1234-5678</li>
                    <li>游닎 contacto@hongosgourmet.com</li>
                </ul>
            </div>
        </div>
    </section>

    <section class="container my-5">
        <h2>Testimonios</h2>
        <div class="row">
            <div class="col-md-6 mb-3">
                 <div class="d-flex align-items-start p-3 border rounded shadow-sm">
                    <img src="img/imagen 4.png" class="rounded-circle me-3" width="60" height="60" alt="Cliente">
                    <div>
                        <h5 class="mb-1 fw-bold">Cliente VIP</h5>
                        <p class="mb-0 small">"Excelente calidad y frescura. Recomiendo totalmente."</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <div class="d-flex align-items-start p-3 border rounded shadow-sm">
                   <img src="img/imagen 1.png" class="rounded-circle me-3" width="60" height="60" alt="Cliente">
                   <div>
                       <h5 class="mb-1">Cliente Regular</h5>
                       <p class="mb-0 small">"Llegan a tiempo y muy ricos."</p>
                   </div>
               </div>
           </div>
        </div>
    </section>

    <section id="agregar-imagen" class="container my-5 border-top pt-5">
      <h4>Zona Interactiva: Agregar Im치genes</h4>
      <div class="input-group mb-3">
        <input type="text" id="inputImagen" class="form-control" placeholder="URL de la imagen">
        <button id="btnAgregarImagen" class="btn btn-primary">Agregar</button>
      </div>
      <div id="galeria" class="row g-3"></div>
    </section>

    <section id="lista-warrior" class="container my-5">
        <h4>Lista de pendientes Merka Warrior</h4>
        <button id="btnEliminarPrimero" class="btn btn-danger btn-sm mb-3">Eliminar 1ra Tarea</button>
        <ul id="listaTareas" class="list-group mb-3">
            <li class="list-group-item">Seta blanca Agranel</li>
            <li class="list-group-item">Seta gris agranel</li>
        </ul>
        <div class="input-group">
            <input id="inputNuevaTarea" type="text" class="form-control" placeholder="Nueva tarea">
            <button id="btnAgregarTarea" type="button" class="btn btn-success">Agregar</button>
        </div>
    </section>


    <button onclick="abrirCarrito()" class="btn-flotante-carrito">
        <i class="fas fa-shopping-basket"></i>
        <span id="contadorFlotante" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="font-size: 12px;">0</span>
    </button>

    <a href="https://wa.me/527221234567" class="whatsapp-float" target="_blank">
      <i class="fab fa-whatsapp"></i>
    </a>


    <div class="offcanvas offcanvas-end" tabindex="-1" id="carritoOffcanvas" aria-labelledby="carritoLabel">
      <div class="offcanvas-header bg-success text-white">
        <h5 class="offcanvas-title" id="carritoLabel"> <i class="fas fa-shopping-cart"></i> Tu Pedido</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      
      <div class="offcanvas-body bg-light">
        <div id="listaCarrito">
            <div class="text-center mt-5 text-muted">
                <i class="fas fa-mushroom fa-3x mb-3"></i>
                <p>Tu carrito est치 vac칤o.</p>
                <p class="small">Agrega hongos deliciosos para comenzar.</p>
            </div>
        </div>
      </div>

      <div class="offcanvas-footer p-3 carrito-footer">
        <div class="d-flex justify-content-between mb-3 align-items-end">
            <span class="fw-bold text-secondary">Total a pagar:</span>
            <span class="fw-bold fs-4 text-dark" id="totalPrecio">$0.00</span>
        </div>
        <button class="btn-whatsapp-carrito shadow-sm" onclick="enviarPedidoWhatsApp()">
            <i class="fab fa-whatsapp fa-lg"></i> Finalizar pedido en WhatsApp
        </button>
      </div>
    </div>


    <footer class="bg-dark text-center text-white py-3 mt-5">
      춸 2025 Lupita | Hongos Mashoma
      <div class="mt-2">
        <i class="fab fa-facebook mx-2"></i>
        <i class="fab fa-instagram mx-2"></i>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // ------------------ L칍GICA DEL CARRITO ------------------
        let carrito = [];
        let myOffcanvas = null; // Se inicializa cuando carga el DOM

        document.addEventListener('DOMContentLoaded', function() {
            myOffcanvas = new bootstrap.Offcanvas(document.getElementById('carritoOffcanvas'));
        });

        function abrirCarrito() {
            if(myOffcanvas) myOffcanvas.show();
        }

        // 1. Agregar producto al carrito
        function agregarAlCarrito(id, nombre, precio, imagen) {
            const existe = carrito.find(item => item.id === id);
            if (existe) {
                existe.cantidad++;
            } else {
                carrito.push({ id, nombre, precio, imagen, cantidad: 1 });
            }
            actualizarCarritoHTML();
            abrirCarrito(); // Feedback inmediato al usuario
        }

        // 2. Renderizar el HTML dentro del Offcanvas
        function actualizarCarritoHTML() {
            const lista = document.getElementById('listaCarrito');
            const totalSpan = document.getElementById('totalPrecio');
            const contador = document.getElementById('contadorFlotante');
            
            lista.innerHTML = '';
            let total = 0;
            let totalItems = 0;

            if (carrito.length === 0) {
                lista.innerHTML = `
                <div class="text-center mt-5 text-muted">
                    <p>Tu carrito est치 vac칤o 游꼓</p>
                </div>`;
            } else {
                carrito.forEach(item => {
                    const subtotal = item.precio * item.cantidad;
                    total += subtotal;
                    totalItems += item.cantidad;

                    const div = document.createElement('div');
                    div.classList.add('carrito-item');
                    div.innerHTML = `
                        <img src="${item.imagen}" class="carrito-img" alt="${item.nombre}">
                        <div class="carrito-detalles">
                            <div class="carrito-titulo">${item.nombre}</div>
                            <div class="carrito-controles">
                                <div class="btn-cantidad" onclick="cambiarCantidad(${item.id}, -1)">-</div>
                                <span class="fw-bold px-2">${item.cantidad}</span>
                                <div class="btn-cantidad" onclick="cambiarCantidad(${item.id}, 1)">+</div>
                                <button class="btn-quitar" onclick="eliminarItem(${item.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="carrito-precio-info">
                            <div class="fw-bold">$${item.precio}</div>
                            <div class="text-muted small">Sub: $${subtotal}</div>
                        </div>
                    `;
                    lista.appendChild(div);
                });
            }

            totalSpan.textContent = `$${total.toFixed(2)}`;
            contador.textContent = totalItems;
            
            // Animaci칩n simple del contador
            contador.classList.add('animate__animated', 'animate__bounce');
            setTimeout(() => contador.classList.remove('animate__animated', 'animate__bounce'), 1000);
        }

        // 3. Cambiar cantidad
        function cambiarCantidad(id, cambio) {
            const item = carrito.find(i => i.id === id);
            if (item) {
                item.cantidad += cambio;
                if (item.cantidad <= 0) {
                    eliminarItem(id);
                } else {
                    actualizarCarritoHTML();
                }
            }
        }

        // 4. Eliminar Item
        function eliminarItem(id) {
            carrito = carrito.filter(item => item.id !== id);
            actualizarCarritoHTML();
        }

        // 5. Enviar a WhatsApp
        function enviarPedidoWhatsApp() {
            if (carrito.length === 0) {
                alert("Tu carrito est치 vac칤o. Agrega productos primero.");
                return;
            }

            let mensaje = "Hola Hongos Mashoma 游꼓, me gustar칤a hacer el siguiente pedido:%0A%0A";
            let total = 0;

            carrito.forEach(item => {
                const subtotal = item.precio * item.cantidad;
                total += subtotal;
                mensaje += `郊쀮잺 ${item.cantidad} x ${item.nombre} ($${subtotal})%0A`;
            });

            mensaje += `%0A*游눯 Total a pagar: $${total} MXN*`;
            mensaje += `%0A%0AQuedo atento a la confirmaci칩n.`;
            
            // N칰mero configurado en tu c칩digo original
            const telefono = "527221234567"; 
            
            window.open(`https://wa.me/${telefono}?text=${mensaje}`, '_blank');
        }


        // ------------------ L칍GICA DE IM츼GENES DIN츼MICAS (EXISTENTE) ------------------
        const btnAgregar = document.getElementById('btnAgregarImagen');
        const inputUrl = document.getElementById('inputImagen');
        const galeria = document.getElementById('galeria');

        if(btnAgregar) {
            btnAgregar.addEventListener('click', function() {
                const url = inputUrl.value;
                if (url === "") { alert("Por favor, ingresa una URL v치lida."); return; }
                
                const colDiv = document.createElement('div');
                colDiv.className = 'col-6 col-md-4 col-lg-3';
                const nuevaImagen = document.createElement('img');
                nuevaImagen.src = url;
                nuevaImagen.className = 'img-fluid rounded shadow-sm';
                nuevaImagen.onerror = function() { alert("URL inv치lida."); colDiv.remove(); };
                
                colDiv.appendChild(nuevaImagen);
                galeria.appendChild(colDiv);
                inputUrl.value = '';
            });
        }

        // ------------------ L칍GICA LISTA DE TAREAS (EXISTENTE) ------------------
        const btnEliminar = document.getElementById("btnEliminarPrimero");
        if(btnEliminar){
            btnEliminar.addEventListener("click", function () {
                const lista = document.getElementById("listaTareas");
                if (lista.firstElementChild) lista.firstElementChild.remove();
            });
        }

        const btnAddTarea = document.getElementById("btnAgregarTarea");
        if(btnAddTarea){
            btnAddTarea.addEventListener("click", function () {
                const texto = document.getElementById("inputNuevaTarea").value.trim();
                if (texto !== "") {
                    const nuevaTarea = document.createElement("li");
                    nuevaTarea.classList.add("list-group-item");
                    nuevaTarea.textContent = texto;
                    document.getElementById("listaTareas").appendChild(nuevaTarea);
                    document.getElementById("inputNuevaTarea").value = "";
                }
            });
        }
    </script>

</body>
</html>